<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyTaxi | Login</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="icon" type="image/x-icon" href="./assets/logo.png">

</head>
    <body class="login-page">
        <form class="login-form" method="post" id="loginform" name="loginform" onsubmit="validate(event);"> 
            <img src="assets/logo.png">
            <input type="text" id ="user" name="user" placeholder="Username" minlength="3" maxlength="20" required>
            <input type="email" id="email" name="email" placeholder="Email ID" minlength="8" maxlength="30" pattern = "[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" required>
            <input type="password" id="pwd" name="pwd" placeholder="Password" minlength="8" maxlength="15" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2, 3}$" required>
            <div class="alert-danger" id="error-messages"></div>
            <button type="submit" id = "btn-login" onclick="return validate();">Login</button>
        </form>
        <script>
            function validate(e){
                var user = document.forms[0]['user'];
                var email = document.forms[0]['email'];
                var password = document.forms[0]['pwd'];
                var error = document.getElementById('error-messages');
                if(!user.validity.valid){
                    error.innerHTML = 'Please enter a valid Username';
                    return false;
                }
                if(!email.validity.valid){
                    error.innerHTML = 'Please enter a valid Email';
                    return false;
                }
                if(!pwd.validity.valid){
                    error.innerHTML = 'Please enter a valid Password';
                    return false;
                }
                localStorage.setItem('greetuser', "true");
                localStorage.setItem('username', user.value);
                window.open('index.html');
                e.preventDefault();
            }
        </script>
    </body>
</html>